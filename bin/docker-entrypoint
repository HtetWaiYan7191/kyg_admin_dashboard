#!/bin/bash

# If running the rails server, create or migrate the database
if [[ "${*}" == *"rails server"* ]]; then
  echo 'Running database setup...'
  ./bin/rails db:create
  ./bin/rails db:migrate
  ./bin/rails db:seed:users
  ./bin/rails db:seed:kings_yangon_users
  ./bin/rails db:seed:kings_yangon_office_users
  ./bin/rails db:seed:brand_categories
  ./bin/rails db:seed
fi

# Remove the server PID file if it exists to avoid errors when restarting the server
rm -f tmp/pids/server.pid

# Execute the passed command
exec "${@}"
