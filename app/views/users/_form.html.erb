<%= render 'layouts/auth_layout' do %>
    <% if @user.persisted?%>
      <%= render 'shared/form_title', locals:{title: 'UPDATE USER' }%>
    <% else %>
        <%= render 'shared/form_title', locals:{title: 'CREATE USER' }%>
    <% end %>
    <div class="p-3">
        <%= form_with model: @user.persisted? ? @user : nil, url: @user.persisted? ? user_path(@user) : create_users_path, method: @user.persisted? ? :patch : :post do |form| %>
        <!-- Email input -->
        <div data-mdb-input-init class="form-outline mb-4">
          <%= form.label :email, "Email", class: 'form-label' %>
              <%= form.email_field :email, placeholder: 'youremail@gmail.com', value: @user.email , required: true, class: 'form-control border border-1' %>
        </div>
          <!-- Name input -->
        <div data-mdb-input-init class="form-outline mb-4">
          <%= form.label :name, "Name", class: 'form-label' %>
          <%= form.text_field :name, placeholder: 'Name', value: @user.name , required: true, class: 'form-control border border-1 '%>
        </div>

            <!-- Department input -->
        <div data-mdb-input-init class="form-outline mb-4">
          <%= form.label :department, "Department", class: 'form-label' %>
          <%= form.text_field :department, placeholder: 'Marketing, HR, Etc...', value: @user.department, required: true, class: 'form-control border border-1 '%>
        </div>

            <!-- Title input -->
        <div data-mdb-input-init class="form-outline mb-4">
          <%= form.label :title, "Title", class: 'form-label' %>
          <%= form.text_field :title, placeholder: 'Title', required: true, value: @user.title , class: 'form-control border border-1 '%>
        </div>

            <!-- Position input -->
        <div data-mdb-input-init class="form-outline mb-4">
          <%= form.label :position, "Position", class: 'form-label' %>
          <%= form.text_field :position, placeholder: 'Position (Junior, Senior)', value: @user.position , required: true, class: 'form-control border border-1 '%>
        </div>

            <!-- Role input -->
        <div class="form-outline mb-4">
          <%= form.label :role, "Role", class: 'form-label' %>
          <%= form.select :role, User.roles.keys.map { |role| [role.capitalize, role] }, { selected: @user.role, prompt: "Select User Role" }, { class: 'form-select' } %>
        </div>
  
          <% if @user.new_record? %>
              <!-- Password input -->
              <div data-mdb-input-init class="form-outline mb-4">
                  <%= form.label :password, "Password", class: 'form-label' %>
                  <%= form.password_field :password, class: 'form-control border border-1'%>
              </div>
          <% end %>

          <!-- Submit button -->
          <% if @user.persisted? %>
            <div class="actions mb-3">
              <%= form.submit "UPDATE", class: 'btn btn-primary w-100 text-center fw-semibold ' %>
            </div>
            <% else %>
              <div class="actions mb-3">
                  <%= form.submit "CREATE", class: 'btn btn-primary w-100 text-center fw-semibold ' %>
            </div>
          <% end %>

      <% end %>
    </div>

<% end %>